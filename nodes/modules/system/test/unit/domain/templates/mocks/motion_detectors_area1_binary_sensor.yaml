template:
  - binary_sensor:
      - name: "Motion Detectors Area 1"
        unique_id: "motion_detectors_area1"
        device_class: motion
        state: >
          {% set motion_detection_enabled = is_state('switch.motion_detection_toggle_area1', 'on') %}
          {% set triggered_sensors = expand(area_entities("area1"))
          | selectattr('domain', 'eq', 'binary_sensor')
          | selectattr('state', 'eq', 'on')
          | list %}
          {{ 'on' if motion_detection_enabled and (triggered_sensors | length > 0) else 'off' }}
        icon: >
          {% if is_state('switch.motion_detection_toggle_area1', 'on') %}
            mdi:motion-sensor
          {% else %}
            mdi:motion-sensor-off
          {% endif %}
        attributes:
          autogenerated: true